import json
import ee
import urllib.request


def acceder_google():
    # registro de usuario de google eart
    service_account = 'saleons@unincca.edu.co'

    #https://developers.google.cn/earth-engine/guides/service_account#use-a-service-account-with-a-private-key
    # uno el .json que descargue de google cloud
    credentials = ee.ServiceAccountCredentials(service_account, 'leafy-rope-354103-f81b0028a3a9.json')

    # se envian datos para entra
    ee.Initialize(credentials)
    


def captura_ip_pc():
    # busco primero la direccion ip para geolocalizacion 
    # de la api en en la url("https://4.ident.me"), se obtiene la ip de computador
    external4ip=urllib.request.urlopen("https://4.ident.me").read().decode("utf8")
    external6ip=urllib.request.urlopen("https://6.ident.me").read().decode("utf8")
    
    
    
    return external4ip

def ubicacion_ip():
   #traigo al ip del funcion captura_ip_pc
   ip=captura_ip_pc() 
   #envio la informaio a la url  con el ip de interes
   url=urllib.request.urlopen("http://ip-api.com/json/"+ip)
   
   
   
   # en data guardo la informacion q me trae la url en un json
   data=url.read().decode()
   
   # hay q tranformar la informacio a formato json ya que no sepude leer diretamewnte
   # data=data.split("(")[1].strip(")")
   
   # se crea el json
   parsed = json.loads(data)
   print(parsed)
   # se saca del diccionario la latitud
   Latitud=parsed["lat"]
   # se saca del diccionario la longitud
   Longitude=parsed["lon"]
   # uno las coordenadas 
   
 
   

   return Latitud,Longitude
  
   
   
